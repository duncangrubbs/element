<!DOCTYPE html>

<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/paper-styles/typography.html">
<link rel="import" href="../bower_components/paper-styles/color.html">

<dom-module id="periodic-element">

  <style>
    :host {
      display: inline-block;
    }

    .main {
      width: 72px;
      height: 104px;
      background-color: var(--paper-blue-500);
      color: white;
      margin: 4px 4px 4px 4px;
      font-size: 1em;
      font-family: 'Roboto';
      padding-left: 4px;
    }

    div {
      padding-bottom: 1px;
    }

    #symbol {
      font-size: 2em;
    }
  </style>

  <template>
    <div class="main">
      <div>{{atomicNumber}}</div>
      <div id="symbol">{{atomicSymbol}}</div>
      <div>{{name}}</div>
      <div>{{atomicMass}}</div>
    </div>
  </template>

  <script>
    Polymer({
      is: 'periodic-element', //Is always the name of the element
      properties: {
        data: {
          type: Object,
        },
        name: {
          type: String,
        },
        atomicSymbol: {
          type: String,
        },
        atomicMass: {
          type: Number,
        },
        classification: {
          type: String,
        },
        atomicNumber: {
          type: Number,
          value: 7,
        },
      },

      ready: function(){
        function loadJSON(path, success, error) {
          var xhr = new XMLHttpRequest();
          xhr.onreadystatechange = function() {
            if (xhr.readyState === XMLHttpRequest.DONE) {
              if (xhr.status === 200) {
                if (success) {
                  success(JSON.parse(xhr.responseText));
                }
              } else {
                if (error) {
                  error(xhr);
                }
              }
            }
          };
          xhr.open('GET', path, true);
          xhr.send();
        }

        loadJSON('data.json', function(data){
          var jsonData;
          jsonData = data;
          var atom;
          for (var i = 0; i < jsonData.PERIODIC_TABLE.ATOM.length; i++) {
            atom = jsonData.PERIODIC_TABLE.ATOM[i];
            this.atomicMass = atom.ATOMIC_WEIGHT;
          }

        }, function(error){console.log(error);})

      }

    });
  </script>

</dom-module>
